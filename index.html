<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    
    <!-- 移动端优化 -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- PWA: 主题色 -->
    <meta name="theme-color" content="#3B82F6" />
    <meta name="msapplication-TileColor" content="#3B82F6" />
    
    <!-- PWA: iOS 配置 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="听写助手" />
    
    <!-- PWA: 应用描述 -->
    <meta name="description" content="AI驱动的单词听写学习工具，拍照即可生成智能学习卡片" />
    <meta name="application-name" content="单词听写助手" />
    
    <!-- PWA: Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- PWA: iOS 图标 -->
    <link rel="apple-touch-icon" href="/icons/icon-180x180.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/icon-167x167.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png" />
    
    <!-- PWA: 启动图（iOS） -->
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" />
    
    <!-- PWA: Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon.png" />
    <link rel="shortcut icon" href="/icons/favicon.png" />
    
    <!-- 缓存控制 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>单词听写助手</title>
    
    <!-- 预加载关键资源 -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- PWA: 添加至主屏幕提示（可选） -->
    <script>
      // 监听 beforeinstallprompt 事件，保存安装提示
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        // 阻止默认的迷你信息栏显示
        e.preventDefault();
        // 保存事件以便稍后触发
        deferredPrompt = e;
        console.log('[PWA] 应用可以安装到主屏幕');
      });
      
      // 应用安装完成后的事件
      window.addEventListener('appinstalled', () => {
        console.log('[PWA] 应用已安装到主屏幕');
        deferredPrompt = null;
      });
    </script>
  </body>
</html>
